# Ruby中級者を目指して「チェリー本」を写経してみた

## きっかけ

9月に「Ruby技術者認定試験 Silver」を受験し、90点台で無事に合格できました。

しかしながら、Silver試験はどちらかと言えば"覚える"要素が多かったような印象があり、特にクラスやモジュールについての理解が足りてないのでは？と自分自身で感じていました。

そんな中、「チェリー本」前書きの
> 「Rubyプログラミングを始めてしばらく経ったが、まだまだ自信が持てない人」を想定

の部分を読んで「これだ！」と。

Ruby の知識が付け焼き刃にならないよう理解を定着させてから Gold試験にも臨みたいと思い、「チェリー本」の写経に取り組んでみました。



## 「チェリー本」について

正式な書名は、『プロを目指す人のためのRuby入門』です。  
表紙の「さくらんぼ」の写真が特徴的なため、通称「チェリー本」と呼ばれています。

Ruby界隈でとても人気のある本で、書評や写経してみた系の記事が数多く存在しますが、著者のブログでも「チェリー本」での学習をサポートしてくれる記事が多数公開されていますので、購入前でもチェックするのがおすすめです。
https://blog.jnito.com/archive/category/%E3%83%81%E3%82%A7%E3%83%AA%E3%83%BC%E6%9C%AC

著者によるこだわりポイント紹介記事は必見。  
「分厚い本なのに勝手に閉じない仕様」はとても嬉しいですね。  
https://blog.jnito.com/entry/2017/11/20/054316



## うわぁ、分厚い…でも、急がば回れ

ネット書店で「チェリー本」を購入し、届いた400ページ超の分厚い本を見て、正直、圧倒されてしまいました。  
（チェリー本以上に分厚い技術書もたくさんありますが…）

しかし、前書きに
> 「分厚い本＝難しい本」だと思わないでください。

> 目指したのは「分厚くて難しい技術書」ではなく、「分厚いが非常にわかりやすい技術書」です。

と書かれているように、解説が丁寧な分だけ、文章が多くなっているだけなので心配は不要でした。

また、読むだけよりも、実際にソースコードを打ち込んで実行してみる方が、時間が掛かって遠回り…なようでも理解が深まるのが早い事を実感できました。  
分かりやすい解説のおかげで、慣れてくると結構サクサクと読み進めることができると思います。

本の初めから順に取り組んでいくのが一番だとは思いますが、「まずは重要な部分を優先的に学びたい」という人には著者による「ここはやっておくべき」という解説動画が YouTube で公開されていますのでチェックしてみてください。
https://blog.jnito.com/entry/2020/09/14/074553



## 写経の環境

- エディタ
  - Visual Studio Code (VS Code)
- 実行環境
  - Windows 10 Pro
  - Windows Subsystem for Linux (WSL) + CentOS 7
  - Ruby Version Manager (RVM)
    - Ruby 2.7
    - Ruby 2.1
- ソースコード管理
  - GitHub
    - クライアントは VS Code

Rubyのコードを書いて実行出来る環境があれば何でも良いと思います。

私の場合、Ruby の実行環境は WSL 上の CentOS にインストールしています。  
PowerShell や VS Code のターミナルから `wsl` コマンド一発で Linux 環境に移動でき、Windows 上のディレクトリやファイルにもそのままアクセス出来るので快適です。

同じソースコードであっても、Ruby のバージョンによっては異なる挙動をする場合があり、RVM 等のツールで使用する Ruby のバージョンを切り替えられるようにしておくと便利です。  

基本的に Ruby 2.7 でチェリー本の学習を進めましたが、Ruby ではある程度後方互換性が保たれているため、特に問題はありませんでした。  
（チェリー本は Ruby 2.4、Ruby技術者認定試験 Silverは Ruby 2.1 に準拠しています）  
Ruby 2.7 の irb ではキーワードが強調表示（文字色が変わる）されたり、複数行編集が可能で便利でした。

写経して動作を確認したソースコードやメモは GitHub へコミット。  
連続して草が生やせると楽しいですよね。



## 新たな学び

### 第3章 テストを自動化する

学習を進める中で例題（サンプルプログラムを作成する箇所）があるのですが、**まずテストコードを作成し、テストコードの実行が成功するようなプログラム本体を作成する**というスタイル、いわゆる「**テスト駆動開発** (Test-Driven Development : TDD)」が取り入れられています。

テストフレームワークは Ruby 標準付属のライブラリ「Minitest」が使用されており、第3章は TDD での開発の進め方の解説です。

"とりあえず `p` メソッドで出力してみればいいや"とか、Minitest も雰囲気で適当に使ってきたようなところもあったので、ちゃんとした解説があるのはありがたいです。

### 第4章 配列や繰り返し処理を理解する

- Range オブジェクトで n以上m以下 / n以上m未満 の判定

  ```ruby
  def liquid?(temperature)
    # 0 <= temperature && temperature < 100  と同等
    (0...100).include?(temperature)
  end

  liquid?(-1)   #=> false
  liquid?(0)    #=> true
  liquid?(99)   #=> true
  liquid?(100)  #=> false
  ```
  2つの不等式を && とかしなくて済む。不等号以外で実装する発想が無かった…

